# Production docker-compose using pre-built images from GitHub Container Registry
# Usage: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# Set these environment variables:
# export GITHUB_REPOSITORY="your-org/vanguard"
# export DOCKER_IMAGE="ghcr.io/${GITHUB_REPOSITORY}:latest"
#
# This configuration excludes development-only services (node, reverb optional)

version: '3.8'

services:
  app:
    image: ${DOCKER_IMAGE:-ghcr.io/${GITHUB_REPOSITORY:-your-org/vanguard}:latest}
    # build section removed - using pre-built image

  horizon:
    image: ${DOCKER_IMAGE:-ghcr.io/${GITHUB_REPOSITORY:-your-org/vanguard}:latest}
    # build section removed - using pre-built image

  reverb:
    image: ${DOCKER_IMAGE:-ghcr.io/${GITHUB_REPOSITORY:-your-org/vanguard}:latest}
    # build section removed - using pre-built image
    # Uncomment to disable Reverb if not using WebSocket features:
    # profiles:
    #   - disabled

  # Node service is excluded in production (assets are pre-built)
  # node:
  #   profiles:
  #     - disabled
